# Story 1.1: Project Foundation & Database Setup

## Status
Draft

## Story
**As a** Developer,
**I want** a fully initialized T3 Stack monorepo with Prisma database schemas and core project structure,
**so that** the development team has a structured, type-safe foundation to build upon.

## Acceptance Criteria
1. A new monorepo is created using Turborepo.
2. A basic Next.js PWA is created within the monorepo.
3. A basic serverless API endpoint (e.g., a health check) is functional.
4. Shared TypeScript and ESLint configurations are in place.
5. The project can be installed and run locally with a single command.
6. Prisma is configured to connect to a local PostgreSQL database.
7. Database schemas for `User`, `Role`, `FMC`, and `Property` are defined.
8. A migration is successfully generated and can be applied to the database.
9. The seven user roles are seeded into the `Role` table upon migration.

## Tasks / Subtasks

- [ ] **Task 1: Initialize T3 Stack Project** (AC: 1, 2, 4)
  - [ ] Run `create-t3-app` with TypeScript, Tailwind CSS, tRPC, Prisma, and Next-Auth
  - [ ] Configure Turborepo for monorepo structure
  - [ ] Setup shared ESLint and TypeScript configurations
  - [ ] Verify project structure matches architecture requirements

- [ ] **Task 2: Configure Database & Prisma** (AC: 6, 7, 8)
  - [ ] Setup local PostgreSQL database connection
  - [ ] Define Prisma schema with User, Role, FMC, Property models
  - [ ] Define enums for Role and TicketStatus as specified in architecture
  - [ ] Generate and apply initial migration
  - [ ] Create database seed script for user roles

- [ ] **Task 3: Setup Basic API Health Check** (AC: 3)
  - [ ] Create tRPC health check procedure
  - [ ] Test API endpoint functionality
  - [ ] Verify serverless function deployment readiness

- [ ] **Task 4: Project Setup Validation** (AC: 5, 9)
  - [ ] Verify `npm install && npm run dev` works locally
  - [ ] Test database connection and migrations
  - [ ] Run seed script to populate user roles
  - [ ] Validate all configurations are working

## Dev Notes

### Data Models
Based on architecture specification, implement these core schemas:

**User Model** `[Source: architecture/data-models.md#user-model]`
```typescript
interface User {
  id: string;
  email: string;
  name: string;
  role: Role;
  fmcId: string;
  isActive: boolean;
  createdAt: Date;
}
```

**Role Enum** `[Source: architecture/data-models.md#shared-enums-types]`
```typescript
export enum Role {
  CUSTOMER,
  ASSOCIATION_OWNER,
  FMC_HEAD,
  SUPERVISOR,
  TECHNICIAN,
  PROCUREMENT,
  VENDOR
}
```

### Technical Stack Requirements
`[Source: architecture/tech-stack.md]`
- Next.js ~14.2.4
- TypeScript ~5.5.3
- Prisma ~5.15.0
- tRPC ~11.0.0-rc.402
- Tailwind CSS ~3.4.4
- Turborepo for monorepo management

### File Structure
`[Source: architecture/unified-project-structure.md]`
- Database schemas: `/prisma/schema.prisma`
- Shared packages: `/packages/db`
- API routes: `/src/server/api/`
- Main app: `/apps/web/`

### Testing
`[Source: architecture/testing-strategy.md]`
- Unit tests with Vitest ~1.6.0
- Test files co-located with source code
- Database tests should use test database instance
- API endpoint tests for health check functionality

## Change Log
| Date | Version | Description | Author |
| :--- | :--- |:--- |:--- |
| 2025-09-07 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*This section will be populated by the QA agent after completion*